<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>SMART Scoring Table</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                padding: 20px;
            }
            table {
                border-collapse: collapse;
                width: 100%;
                margin-top: 20px;
            }
            th,
            td {
                border: 1px solid #ddd;
                padding: 8px;
                text-align: center;
            }
            th {
                background-color: #f4f4f4;
            }
            h2 {
                margin-top: 40px;
            }
        </style>
    </head>
    <body>
        <h1>Hasil Perhitungan SMART</h1>
        <div id="output"></div>

        <script>
            const bobot = {
                logika: 0.25,
                teknologi: 0.25,
                manajemen: 0.15,
                sosial: 0.2,
                mesin: 0.15,
            };

            const answer = {
                logika: 5,
                teknologi: 5,
                manajemen: 5,
                sosial: 5,
                mesin: 5,
            };

            const jurusan = {
                'Teknik Informatika': {
                    logika: 5,
                    teknologi: 5,
                    manajemen: 3,
                    sosial: 2,
                    mesin: 2,
                },
                'Teknik Industri': {
                    logika: 4,
                    teknologi: 4,
                    manajemen: 4,
                    sosial: 2,
                    mesin: 4,
                },
                'Teknik Elektro': {
                    logika: 5,
                    teknologi: 5,
                    manajemen: 2,
                    sosial: 1,
                    mesin: 5,
                },
                Manajemen: {
                    logika: 3,
                    teknologi: 2,
                    manajemen: 5,
                    sosial: 4,
                    mesin: 1,
                },
                Akuntansi: {
                    logika: 5,
                    teknologi: 2,
                    manajemen: 4,
                    sosial: 2,
                    mesin: 1,
                },
                'Ekonomi Syariah': {
                    logika: 4,
                    teknologi: 2,
                    manajemen: 4,
                    sosial: 3,
                    mesin: 1,
                },
                'Ilmu Hukum': {
                    logika: 3,
                    teknologi: 1,
                    manajemen: 3,
                    sosial: 5,
                    mesin: 1,
                },
                'Ilmu Komunikasi': {
                    logika: 2,
                    teknologi: 3,
                    manajemen: 4,
                    sosial: 5,
                    mesin: 1,
                },
                'Sastra Inggris': {
                    logika: 2,
                    teknologi: 1,
                    manajemen: 3,
                    sosial: 4,
                    mesin: 1,
                },
                PPKn: {
                    logika: 3,
                    teknologi: 1,
                    manajemen: 3,
                    sosial: 5,
                    mesin: 1,
                },
            };

            const minPerKriteria = {};
            for (let kriteria in bobot) {
                const values = Object.values(jurusan).map((j) => j[kriteria]);
                minPerKriteria[kriteria] = Math.min(...values);
            }

            const hasil = Object.entries(jurusan).map(([nama, nilai]) => {
                let total = 0;
                const detail = [];

                for (let kriteria in bobot) {
                    const val = nilai[kriteria];
                    const min = minPerKriteria[kriteria];
                    const utility = min === 0 ? 0 : (val - min) / min;
                    const weighted = utility * bobot[kriteria];
                    const final = weighted * answer[kriteria];
                    total += final;

                    detail.push({
                        kriteria,
                        value: val,
                        min,
                        utility: utility.toFixed(2),
                        bobot: bobot[kriteria],
                        result: (weighted * answer[kriteria]).toFixed(4),
                    });
                }

                return { jurusan: nama, detail, skorAkhir: total.toFixed(4) };
            });

            const output = document.getElementById('output');

            hasil.forEach(({ jurusan, detail, skorAkhir }) => {
                const section = document.createElement('section');
                section.innerHTML = `<h2>${jurusan}</h2>
        <table>
          <thead>
            <tr>
              <th>Kriteria</th>
              <th>Value</th>
              <th>Min</th>
              <th>Utility</th>
              <th>Bobot</th>
              <th>Skor Akhir (Ã— Answer)</th>
            </tr>
          </thead>
          <tbody>
            ${detail
                .map(
                    (d) => `
              <tr>
                <td>${d.kriteria}</td>
                <td>${d.value}</td>
                <td>${d.min}</td>
                <td>${d.utility}</td>
                <td>${d.bobot}</td>
                <td>${d.result}</td>
              </tr>`,
                )
                .join('')}
            <tr>
              <td colspan="5"><strong>Total Skor</strong></td>
              <td><strong>${skorAkhir}</strong></td>
            </tr>
          </tbody>
        </table>`;
                output.appendChild(section);
            });
        </script>
    </body>
</html>
